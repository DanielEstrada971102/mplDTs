

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DTPatch &mdash; mplDTs 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=fc837d61"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="patches" href="main.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            mplDTs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../geometry/main.html">geometry</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="main.html">patches</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">DTPatch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">mplDTs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="main.html">patches</a></li>
      <li class="breadcrumb-item active">DTPatch</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/DanielEstrada971102/mplDTs" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dtpatch">
<h1>DTPatch<a class="headerlink" href="#dtpatch" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">DTPatch</span></code> class provides visualization capabilities for DT Station data. It can draw station and super layer
boundary boxes, and DT cells based on geometrical information taken from <a class="reference internal" href="../geometry/station.html"><span class="doc">Station</span></a> instances.</p>
<p>The class itself is not a matplotlib artist, but it creates a couple of matplotlib patch collections
to draw the station bounds and cells and that can be accessed as attributes of the <code class="docutils literal notranslate"><span class="pre">DTPatch</span></code> instance.
It adds to the provided matplotlib axes the following artists:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bounds_collections</span></code>: A collection of patches representing the bounds of the station and its superlayers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cells_collection</span></code>: A collection of patches representing each DT cell, with optional colormap based on time information.</p></li>
</ul>
<p>Since station and super layers bounds are a patch collection independent of the cells collection, any supported matplotlib
rc parameters can be passed to customize the appearance of the bounds. The same applies to the cells collection, specially
the patch array that allows to define the color map to represent any drift cell properties passed through
the <code class="docutils literal notranslate"><span class="pre">dt_info</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">Station</span></code> class.</p>
<p>The class supports plotting in both <strong>local</strong> and <strong>global</strong> DT CMS coordinate views. In local mode,
it is possible to draw the chamber in either the <span class="math notranslate nohighlight">\(\phi\)</span> or <span class="math notranslate nohighlight">\(\eta\)</span> orientation, displaying
the cells of <code class="docutils literal notranslate"><span class="pre">SL1</span></code> and <code class="docutils literal notranslate"><span class="pre">SL3</span></code> or the cells of <code class="docutils literal notranslate"><span class="pre">SL2</span></code>, respectively.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">bounds_collections</span></code> has the matplotlib property <code class="docutils literal notranslate"><span class="pre">set_picker</span></code> enabled, and the <code class="docutils literal notranslate"><span class="pre">Station</span></code>
instance stored as the <code class="docutils literal notranslate"><span class="pre">station</span></code> attribute. This allows for the creation of interactive plots
with the matplotlib <code class="docutils literal notranslate"><span class="pre">pick_event</span></code>.</p>
</div>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>The following example shows how to create <code class="docutils literal notranslate"><span class="pre">DTPatch</span></code> objects and plot the cells of a DT chamber in the local view.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Station</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTStationPatch</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># Plot resolution</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Cell appearance configuration</span>
<span class="linenos"> 8</span><span class="n">cells_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 9</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mf">0.4</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">10</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">12</span><span class="p">}</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1"># Create figure and subplots</span>
<span class="linenos">15</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
<span class="linenos">16</span><span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c1"># Define DT station</span>
<span class="linenos">19</span><span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="c1"># Create patches for phi-view and eta-view</span>
<span class="linenos">22</span><span class="n">dt_patch_phi</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">23</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">24</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos">25</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">26</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">28</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">dt_patch_z</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">30</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">31</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="linenos">32</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">33</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">34</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">35</span><span class="p">)</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="c1"># Set axis limits for phi-view</span>
<span class="linenos">38</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">bounds</span>
<span class="linenos">39</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">local_center</span>
<span class="linenos">40</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="c1"># Set axis limits for eta-view</span>
<span class="linenos">44</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">45</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="c1"># Add titles and labels</span>
<span class="linenos">48</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Local view of a DT Station : </span><span class="si">{</span><span class="n">station</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="image-class reference internal image-reference" href="../../_images/cms_dt_local_wb.svg" id="cms-dt-local-wb"><img alt="Alternative text" class="image-class align-center" id="cms-dt-local-wb" src="../../_images/cms_dt_local_wb.svg" style="width: 800px;" />
</a>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">bounds_kwargs</span></code> and <code class="docutils literal notranslate"><span class="pre">cells_kwargs</span></code> arguments allows for customization of the
appearance of the bounds and cells, respectively. And as mentioned before, the <code class="docutils literal notranslate"><span class="pre">dt_info</span></code> argument
passed to the <code class="docutils literal notranslate"><span class="pre">Station</span></code> instance can be used to define a colormap based on any drift cell property as
shown in the following example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Station</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTStationPatch</span>
<span class="hll"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Normalize</span>
</span><span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># Plot resolution</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Configure colormap and normalization for the plot</span>
<span class="hll"><span class="linenos"> 9</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">10</span><span class="n">cmap</span><span class="o">.</span><span class="n">set_under</span><span class="p">(</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>  <span class="c1"># Set color for values below the minimum</span>
</span><span class="hll"><span class="linenos">11</span><span class="n">norm</span> <span class="o">=</span> <span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># Normalize data values to colormap range</span>
</span><span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># Cell appearance configuration</span>
<span class="linenos">14</span><span class="n">cells_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">15</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mf">0.4</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">16</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="hll"><span class="linenos">17</span>    <span class="s2">&quot;cmap&quot;</span><span class="p">:</span> <span class="n">cmap</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">18</span>    <span class="s2">&quot;norm&quot;</span><span class="p">:</span> <span class="n">norm</span><span class="p">,</span>
</span><span class="linenos">19</span><span class="p">}</span>
<span class="linenos">20</span>
<span class="hll"><span class="linenos">21</span><span class="c1"># Bounds appearance configuration</span>
</span><span class="hll"><span class="linenos">22</span><span class="n">bounds_kwargs</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll"><span class="linenos">23</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">24</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">25</span>    <span class="c1"># Fill colors for chamber, SL1, SL3, and SL2 in that order</span>
</span><span class="hll"><span class="linenos">26</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;lightyellow&quot;</span><span class="p">,</span> <span class="s2">&quot;lightpink&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
</span><span class="hll"><span class="linenos">27</span>    <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>  <span class="c1"># Transparency</span>
</span><span class="hll"><span class="linenos">28</span><span class="p">}</span>
</span><span class="hll"><span class="linenos">29</span>
</span><span class="hll"><span class="linenos">30</span><span class="c1"># Define DT station information (example data)</span>
</span><span class="hll"><span class="linenos">31</span><span class="n">dt_info</span> <span class="o">=</span> <span class="p">[</span>
</span><span class="hll"><span class="linenos">32</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">33</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">34</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">35</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">36</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">37</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">38</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">39</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">40</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">41</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">42</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">43</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;var1&quot;</span><span class="p">:</span> <span class="mi">17</span><span class="p">},</span>
</span><span class="hll"><span class="linenos">44</span><span class="p">]</span>
</span><span class="linenos">45</span>
<span class="linenos">46</span><span class="c1"># Create figure and subplots</span>
<span class="linenos">47</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
<span class="linenos">48</span><span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="c1"># Define DT station</span>
<span class="hll"><span class="linenos">51</span><span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dt_info</span><span class="o">=</span><span class="n">dt_info</span><span class="p">)</span>
</span><span class="linenos">52</span>
<span class="linenos">53</span><span class="c1"># Create patches for phi-view and eta-view</span>
<span class="linenos">54</span><span class="n">dt_patch_phi</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">55</span>    <span class="n">station</span><span class="p">,</span>
<span class="hll"><span class="linenos">56</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class="linenos">57</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">58</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">59</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="hll"><span class="linenos">60</span>    <span class="n">vmap</span><span class="o">=</span><span class="s2">&quot;var1&quot;</span><span class="p">,</span>
</span><span class="linenos">61</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">62</span><span class="p">)</span>
<span class="linenos">63</span><span class="n">dt_patch_z</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="hll"><span class="linenos">64</span>    <span class="n">station</span><span class="p">,</span>
</span><span class="linenos">65</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="linenos">66</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">67</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">68</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">69</span>    <span class="n">vmap</span><span class="o">=</span><span class="s2">&quot;var1&quot;</span><span class="p">,</span>
<span class="linenos">70</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">71</span><span class="p">)</span>
<span class="linenos">72</span>
<span class="linenos">73</span><span class="c1"># Add colorbar for the variable mapped to cell colors</span>
<span class="linenos">74</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">dt_patch_z</span><span class="o">.</span><span class="n">cells_collection</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Arbitrary variable&quot;</span><span class="p">)</span>
<span class="linenos">75</span>
<span class="linenos">76</span><span class="c1"># Set axis limits for phi-view</span>
<span class="linenos">77</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">bounds</span>
<span class="linenos">78</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">local_center</span>
<span class="linenos">79</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">80</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">81</span>
<span class="linenos">82</span><span class="c1"># Set axis limits for eta-view</span>
<span class="linenos">83</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">84</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">85</span>
</pre></div>
</div>
<a class="image-class reference internal image-reference" href="../../_images/cms_dt_local_c.svg"><img alt="Alternative text" class="image-class align-center" src="../../_images/cms_dt_local_c.svg" style="width: 800px;" />
</a>
<p>Since each <code class="docutils literal notranslate"><span class="pre">DTPatch</span></code> object is an isolated instance, it is possible to plot multiple chambers in
the same axes and use the global mode to utilize the exact CMS coordinate system to visualize part
or the whole DT system.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpl_toolkits.axes_grid1.inset_locator</span><span class="w"> </span><span class="kn">import</span> <span class="n">zoomed_inset_axes</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpl_toolkits.axes_grid1.inset_locator</span><span class="w"> </span><span class="kn">import</span> <span class="n">mark_inset</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Station</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTStationPatch</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">800</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="n">bounds_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">10</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">12</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;lightyellow&quot;</span><span class="p">,</span> <span class="s2">&quot;lightpink&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
<span class="linenos">13</span>    <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
<span class="linenos">14</span><span class="p">}</span>
<span class="linenos">15</span><span class="n">cells_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">16</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">19</span><span class="p">}</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">axins</span> <span class="o">=</span> <span class="n">zoomed_inset_axes</span><span class="p">(</span>
<span class="linenos">23</span>    <span class="n">ax</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">),</span> <span class="n">bbox_transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span>
<span class="linenos">24</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
<span class="linenos">27</span>    <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
<span class="linenos">28</span>        <span class="k">if</span> <span class="p">(</span><span class="n">sc</span> <span class="o">==</span> <span class="mi">13</span> <span class="ow">or</span> <span class="n">sc</span> <span class="o">==</span> <span class="mi">14</span><span class="p">)</span> <span class="ow">and</span> <span class="n">st</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
<span class="linenos">29</span>            <span class="k">continue</span>  <span class="c1"># Sector 13 and 14 are only one MB4 station</span>
<span class="linenos">30</span>        <span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="n">sc</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="n">st</span><span class="p">)</span>
<span class="linenos">31</span>        <span class="n">_</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">32</span>            <span class="n">station</span><span class="p">,</span>
<span class="linenos">33</span>            <span class="n">axes</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="linenos">34</span>            <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">35</span>            <span class="n">local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">36</span>            <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">37</span>            <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">38</span>        <span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">cells_kwargs</span><span class="p">[</span><span class="s2">&quot;linewidth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">]:</span>  <span class="c1"># Only 3 sectors for the zoomed in view</span>
<span class="linenos">43</span>    <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
<span class="linenos">44</span>        <span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="n">sc</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="n">st</span><span class="p">)</span>
<span class="linenos">45</span>        <span class="n">_</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">46</span>            <span class="n">station</span><span class="p">,</span>
<span class="linenos">47</span>            <span class="n">axes</span><span class="o">=</span><span class="n">axins</span><span class="p">,</span>
<span class="linenos">48</span>            <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">49</span>            <span class="n">local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">50</span>            <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">51</span>            <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">52</span>        <span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Global view of DT Stations on Wheel -2&quot;</span><span class="p">)</span>
<span class="linenos">55</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x [cm]&quot;</span><span class="p">)</span>
<span class="linenos">56</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y [cm]&quot;</span><span class="p">)</span>
<span class="linenos">57</span>
<span class="linenos">58</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="linenos">59</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span>
<span class="linenos">62</span><span class="n">axins</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
<span class="linenos">63</span><span class="n">axins</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">66</span><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="n">mark_inset</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">axins</span><span class="p">,</span> <span class="n">loc1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc2</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.55</span><span class="p">)</span>  <span class="c1"># Increase space on the right</span>
</pre></div>
</div>
<a class="image-class reference internal image-reference" href="../../_images/cms_dts_phi_zoomed.svg"><img alt="Alternative text" class="image-class align-center" src="../../_images/cms_dts_phi_zoomed.svg" style="width: 1200px;" />
</a>
<p>And also in <span class="math notranslate nohighlight">\(\eta\)</span> orientation, that means the longitudinal CMS view:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpl_toolkits.axes_grid1.inset_locator</span><span class="w"> </span><span class="kn">import</span> <span class="n">zoomed_inset_axes</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpl_toolkits.axes_grid1.inset_locator</span><span class="w"> </span><span class="kn">import</span> <span class="n">mark_inset</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Station</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTStationPatch</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">800</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="n">bounds_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">10</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">11</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">12</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;lightyellow&quot;</span><span class="p">,</span> <span class="s2">&quot;lightpink&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
<span class="linenos">13</span>    <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
<span class="linenos">14</span><span class="p">}</span>
<span class="linenos">15</span><span class="n">cells_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">16</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">19</span><span class="p">}</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="linenos">22</span><span class="n">axins</span> <span class="o">=</span> <span class="n">zoomed_inset_axes</span><span class="p">(</span>
<span class="linenos">23</span>    <span class="n">ax</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span> <span class="n">bbox_transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span>
<span class="linenos">24</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="k">for</span> <span class="n">wh</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
<span class="linenos">27</span>    <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
<span class="linenos">28</span>        <span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=</span><span class="n">wh</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="n">st</span><span class="p">)</span>
<span class="linenos">29</span>        <span class="n">_</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">30</span>            <span class="n">station</span><span class="p">,</span>
<span class="linenos">31</span>            <span class="n">axes</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="linenos">32</span>            <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">33</span>            <span class="n">local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">34</span>            <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">35</span>            <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">36</span>        <span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="n">cells_kwargs</span><span class="p">[</span><span class="s2">&quot;linewidth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="k">for</span> <span class="n">wh</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
<span class="linenos">41</span>    <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
<span class="linenos">42</span>        <span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=</span><span class="n">wh</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="n">st</span><span class="p">)</span>
<span class="linenos">43</span>        <span class="n">_</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">44</span>            <span class="n">station</span><span class="p">,</span>
<span class="linenos">45</span>            <span class="n">axes</span><span class="o">=</span><span class="n">axins</span><span class="p">,</span>
<span class="linenos">46</span>            <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">47</span>            <span class="n">local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">48</span>            <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">49</span>            <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">50</span>        <span class="p">)</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Global view of DT Stations on Sector 3&quot;</span><span class="p">)</span>
<span class="linenos">53</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;z [cm]&quot;</span><span class="p">)</span>
<span class="linenos">54</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;r [cm]&quot;</span><span class="p">)</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="linenos">57</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="mi">190</span><span class="p">,</span> <span class="mi">610</span><span class="p">,</span> <span class="mi">410</span><span class="p">,</span> <span class="mi">540</span>
<span class="linenos">60</span><span class="n">axins</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
<span class="linenos">61</span><span class="n">axins</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">64</span><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">65</span>
<span class="linenos">66</span><span class="n">mark_inset</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">axins</span><span class="p">,</span> <span class="n">loc1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc2</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="p">)</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.55</span><span class="p">)</span>  <span class="c1"># Increase space on the right</span>
</pre></div>
</div>
<a class="image-class reference internal image-reference" href="../../_images/cms_dts_eta_zoomed.svg"><img alt="Alternative text" class="image-class align-center" src="../../_images/cms_dts_eta_zoomed.svg" style="width: 800px;" />
</a>
<p>As you can notice from the first <a class="reference external" href="cms_dt_local_wb">example</a>, the chamber appears in a local reference frame
resulting in an unnaturally rotated view. <code class="docutils literal notranslate"><span class="pre">DTPatch</span></code> provides a direct way to invert the view
by calling <code class="docutils literal notranslate"><span class="pre">invert_station</span></code> method (or setting the <code class="docutils literal notranslate"><span class="pre">invert</span></code> argument <code class="docutils literal notranslate"><span class="pre">True</span></code> when instantiating).
This simply applies reflections to the chamber view according to wheel, station and faceview (<span class="math notranslate nohighlight">\(\phi\)</span> or <span class="math notranslate nohighlight">\(\eta\)</span>)
and the result is a more natural view of the chamber as illustrated in the figure.</p>
<a class="image-class reference internal image-reference" href="../../_images/mpldts_view_frames.png"><img alt="Alternative text" class="image-class align-center" src="../../_images/mpldts_view_frames.png" style="width: 800px;" />
</a>
<p>inversion (1) or (2) will depend on DT chamber’s orientation, that means,
if detector face is in <span class="math notranslate nohighlight">\(+z\)</span> or <span class="math notranslate nohighlight">\(-z\)</span> direction, detailed information can be found <a class="reference external" href="https://dt-sx5.web.cern.ch/dt-sx5/run/docs/050912DT_type_naming.pdf">here.</a></p>
<p>The following example shows how to do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Normalize</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Station</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">mpldts.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTStationPatch</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="linenos"> 7</span><span class="n">cmap</span><span class="o">.</span><span class="n">set_under</span><span class="p">(</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">norm</span> <span class="o">=</span> <span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">bounds_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">13</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">15</span>    <span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="s2">&quot;lightyellow&quot;</span><span class="p">,</span> <span class="s2">&quot;lightpink&quot;</span><span class="p">,</span> <span class="s2">&quot;lightblue&quot;</span><span class="p">],</span>
<span class="linenos">16</span>    <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>
<span class="linenos">17</span><span class="p">}</span>
<span class="linenos">18</span><span class="n">cells_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">19</span>    <span class="s2">&quot;linewidth&quot;</span><span class="p">:</span> <span class="mf">0.4</span> <span class="o">*</span> <span class="mi">72</span> <span class="o">/</span> <span class="n">dpi</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="s2">&quot;edgecolor&quot;</span><span class="p">:</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span>
<span class="linenos">21</span>    <span class="s2">&quot;cmap&quot;</span><span class="p">:</span> <span class="n">cmap</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="s2">&quot;norm&quot;</span><span class="p">:</span> <span class="n">norm</span><span class="p">,</span>
<span class="linenos">23</span><span class="p">}</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">dt_info</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">26</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">27</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">28</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">29</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">30</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">31</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">32</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">33</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">34</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">35</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">36</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">37</span>    <span class="p">{</span><span class="s2">&quot;sl&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="linenos">38</span><span class="p">]</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">station</span> <span class="o">=</span> <span class="n">Station</span><span class="p">(</span><span class="n">wheel</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sector</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">station</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">dt_info</span><span class="o">=</span><span class="n">dt_info</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">dt_patch_phi</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">46</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">47</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos">48</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">49</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">50</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">51</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">52</span><span class="p">)</span>
<span class="linenos">53</span><span class="n">dt_patch_z</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">54</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">55</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<span class="linenos">56</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">57</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">58</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">59</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">60</span><span class="p">)</span>
<span class="linenos">61</span><span class="n">dt_patch_phi</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">62</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">63</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="linenos">64</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
<span class="linenos">65</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">66</span>    <span class="n">inverted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">67</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">68</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">69</span><span class="p">)</span>
<span class="linenos">70</span><span class="n">dt_patch_z</span> <span class="o">=</span> <span class="n">DTStationPatch</span><span class="p">(</span>
<span class="linenos">71</span>    <span class="n">station</span><span class="p">,</span>
<span class="linenos">72</span>    <span class="n">axes</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
<span class="linenos">73</span>    <span class="n">faceview</span><span class="o">=</span><span class="s2">&quot;eta&quot;</span><span class="p">,</span>
<span class="linenos">74</span>    <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">75</span>    <span class="n">inverted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">76</span>    <span class="n">cells_kwargs</span><span class="o">=</span><span class="n">cells_kwargs</span><span class="p">,</span>
<span class="linenos">77</span>    <span class="n">bounds_kwargs</span><span class="o">=</span><span class="n">bounds_kwargs</span><span class="p">,</span>
<span class="linenos">78</span><span class="p">)</span>
<span class="linenos">79</span>
<span class="linenos">80</span><span class="n">line</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Line2D</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">81</span><span class="n">fig</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="linenos">82</span>
<span class="linenos">83</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">bounds</span>
<span class="linenos">84</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">station</span><span class="o">.</span><span class="n">local_center</span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">87</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<a class="image-class reference internal image-reference" href="../../_images/cms_dt_local_inversion.svg"><img alt="Alternative text" class="image-class align-center" src="../../_images/cms_dt_local_inversion.svg" style="width: 800px;" />
</a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="main.html" class="btn btn-neutral float-left" title="patches" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Daniel Estrada, Universidad de Oviedo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>